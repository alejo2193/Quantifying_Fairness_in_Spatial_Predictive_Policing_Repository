<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantifying Fairness in Spatial Predictive Policing</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        .top-bar {
            background-color: #333;
            color: white;
            padding: 15px 30px;
            text-align: center;
        }
        .top-bar h1 {
            margin: 0;
            font-size: 2em;
            color: white;
        }
        .container {
            max-width: 900px;
            margin: 20px auto;
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        h2, h3 {
            color: #333;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        .image-container { /* Estilo para la imagen principal (fig2) */
            background-color: white;
            display: block;
            padding: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        .image-container img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .badges {
            text-align: center;
            margin-bottom: 15px;
        }
        .badges img {
            margin: 0 5px;
        }
        .repo-link-container {
            text-align: center;
            margin-bottom: 25px;
        }
        .repo-link {
            display: inline-block;
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }
        .repo-link:hover {
            background-color: #0056b3;
            color: white;
        }
        .justify-text {
            text-align: justify;
        }
        pre {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border: 1px solid #eee;
        }
        code {
            font-family: monospace;
            background-color: #eef;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .table-of-contents {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .table-of-contents ul {
            list-style-type: none;
            padding-left: 0;
        }
        .table-of-contents li a {
            text-decoration: none;
            color: #007bff;
        }
        .table-of-contents li a:hover {
            text-decoration: underline;
        }
        section {
            margin-bottom: 30px;
        }

        /* --- Estilos para los videos --- */
        .videos-results-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
            margin-bottom: 30px; /* Espacio después de los videos */
        }
        .video-item {
            flex-basis: 48%;
            max-width: 48%;
            box-sizing: border-box;
            text-align: center;
        }
        .video-item video {
            width: 100%;
            height: auto;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        .video-item p {
            margin-top: 8px;
            font-size: 0.9em;
            color: #555;
        }
        @media (max-width: 768px) {
            .video-item {
                flex-basis: 100%;
                max-width: 100%;
            }
        }
        /* --- Fin de estilos para los videos --- */

        /* --- Estilos para las Figuras Adicionales en Resultados --- */
        .figure-item {
            margin-top: 25px;
            margin-bottom: 25px;
            text-align: center; /* Centra la imagen */
        }
        .figure-item img {
            max-width: 80%; /* Ajusta según el tamaño deseado para las figuras */
            height: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px; /* Espacio entre imagen y caption */
            display: block; /* Necesario para que margin auto funcione para centrar si tiene un max-width menor al 100% */
            margin-left: auto;
            margin-right: auto;
        }
        .figure-caption {
            font-size: 0.9em;
            color: #555;
            text-align: justify; /* Justificar texto de la descripción */
            max-width: 750px; /* Ancho máximo para la descripción, ayuda a la legibilidad */
            margin-left: auto; /* Centra el bloque de texto si es más angosto que el contenedor */
            margin-right: auto;
            padding: 0 15px; /* Un poco de padding lateral para que no pegue a los bordes en viewports pequeños */
        }
        /* --- Fin de estilos para Figuras Adicionales --- */

    </style>
</head>
<body>

    <div class="top-bar">
        <h1>Quantifying Fairness in Spatial Predictive Policing</h1>
    </div>

    <div class="container">

        <div class="image-container">
          <img src="Images/fig2.png" alt="Figura 2" width="700"/>
        </div>

        <div class="badges">
            <img src="https://img.shields.io/badge/Status-In%20Development-yellow" alt="Status Badge">
            <img src="https://img.shields.io/badge/License-MIT-blue" alt="License Badge">
            <img src="https://img.shields.io/badge/Version-1.0.0-informational" alt="Version Badge">
        </div>

        <div class="repo-link-container">
            <a href="https://github.com/alejo2193/Quantifying_Fairness_in_Spatial_Predictive_Policing_Repository" target="_blank" class="repo-link">
                See Repository in GitHub
            </a>
        </div>

        <div class="justify-text">
            <p>Fairness pipeline for Prediction Fairness (PF) and Resource Allocation Fairness (RAF): it starts by defining evaluation groups and comparing predicted and actual crime probabilities. Selected areas are analyzed under resource constraints. PF metrics are computed using error functions, such as f(M, G1*) = |0.5 - 0.0| = 0.5, and disparities are measured using Max-min and Gini. RAF fairness is then assessed through precision metrics derived from confusion matrices, e.g., precision(M, G1*) = 0, precision(M, G2*) = 1.</p>
        </div>

        <section id="about-the-project">
            <h2>About the Project</h2>
            <div class="justify-text">
                <p>This repository contains the code used to develop the research presented in the paper <strong>"Quantifying Fairness in Spatial Predictive Policing"</strong>. The project implements and evaluates spatial predictive models (SEPP, KDE, Naive KDE) on crime data from Bogotá and Chicago, focusing on quantifying and analyzing the fairness of predictions in different regions.</p>
            </div>

            <div class="videos-results-container">
                <div class="video-item">
                    <video controls autoplay loop muted playsinline>
                        <source src="Images/crime_heatmap_bogota.mp4" type="video/mp4">
                        Tu navegador no soporta el elemento de video.
                    </video>
                    <p>Crime Heatmap Bogotá</p>
                </div>
                <div class="video-item">
                    <video controls autoplay loop muted playsinline>
                        <source src="Images/crime_heatmap_chicago.mp4" type="video/mp4">
                        Tu navegador no soporta el elemento de video.
                    </video>
                    <p>Crime Heatmap Chicago</p>
                </div>
            </div>
            
        </section>

        <section id="algorithms-used">
            <h2>Algorithms Used</h2>
            <div class="justify-text">
                <p>The predictive algorithms implemented are <strong>SEPP</strong>, <strong>KDE</strong>, and <strong>Naive KDE</strong>. These models were implemented using base code developed by the <strong>QuantCrime Lab</strong> at the University of Leeds, available at: <a href="https://github.com/QuantCrimAtLeeds/PredictCode" target="_blank">https://github.com/QuantCrimAtLeeds/PredictCode</a>.</p>
            </div>
        </section>

        <section id="project-structure">
            <h2>Project Structure</h2>
            <p>The project is organized into key folders for experimental scripts, custom libraries (including base code from University of Leeds), examples, and data (raw, processed, results for Bogotá and Chicago). A global configuration file manages variables across scripts.</p>
            <pre><code>.
├── Experiment_Scripts/ 
├── Librerias/          
├── Examples/           
├── Data/               
├── global_vars.py      
└── README.md</code></pre>
            <p class="justify-text">For a detailed breakdown of each folder and its contents, please refer to the <a href="https://github.com/alejo2193/Quantifying_Fairness_in_Spatial_Predictive_Policing_Repository/blob/main/README.md#project-structure" target="_blank">Project Structure section in the README.md</a>.</p>
        </section>

        <section id="installation">
            <h2>Installation</h2>
            <p class="justify-text">To set up the project locally, ensure you have Python 3.7+, pip, and git. Then, clone the repository, create a virtual environment, and install dependencies from `requirements.txt`.</p>
            <p class="justify-text">For detailed step-by-step instructions, please see the <a href="https://github.com/alejo2193/Quantifying_Fairness_in_Spatial_Predictive_Policing_Repository/blob/main/README.md#installation" target="_blank">Installation Guide in the README.md</a>.</p>
        </section>

        <section id="results">
            <h2>Results</h2>
            <div class="justify-text">
                <p>The results, including metrics, visualizations, and predictions, are stored in the <code>Data/</code> folder, organized by city. These allow for examination of model performance, prediction distribution, and fairness metrics comparisons.</p>
            </div>

            <div class="figure-item">
                <img src="Images/fig4.png" alt="Max-min and Gini metrics for fairness evaluation">
                <p class="figure-caption"><strong>Figure 4:</strong> Max-min and Gini metrics for fairness evaluation in Bogotá and Chicago. Each point along the X-axis represents the percentage of area analyzed in each group relative to the total predictions. Along the Y-axis, the Max-min metric represents the disparity in benefits, while the Gini metric represents the percentage of this benefit disparity. These metrics are depicted for each model under evaluation.</p>
            </div>

            <div class="figure-item">
                <img src="Images/fig5.png" alt="Trend of classification precision for patrolled and non-patrolled areas">
                <p class="figure-caption"><strong>Figure 5:</strong> Trend of classification precision for patrolled and non-patrolled areas across a specific percentage range of the total coverage area (1% to 30%, simulating real scenarios) in each model for $G_1$ and $G_2$ from predictions in Chicago and Bogotá.</p>
            </div>

        </section>

        <section id="references">
            <h2>References</h2>
            <ul>
                <li><strong>Paper:</strong> "Quantifying Fairness in Spatial Predictive Policing" (Link to paper if available).</li>
                <li><strong>open_cp base code:</strong> <a href="https://github.com/QuantCrimAtLeeds/PredictCode" target="_blank">QuantCrime Lab - PredictCode</a>.</li>
            </ul>
        </section>

        <section id="contact">
            <h2>Contact</h2>
            <div class="justify-text">
                <p>This article is currently undergoing major peer review. Contact details and citation instructions will be provided upon completion of the review process.</p>
            </div>
        </section>

    </div>

    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
</body>
</html>